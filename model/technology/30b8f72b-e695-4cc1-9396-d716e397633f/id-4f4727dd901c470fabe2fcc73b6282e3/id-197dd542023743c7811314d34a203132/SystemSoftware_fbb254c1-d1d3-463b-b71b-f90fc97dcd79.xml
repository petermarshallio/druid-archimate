<archimate:SystemSoftware
    xmlns:archimate="http://www.archimatetool.com/archimate"
    name="Historical"
    id="fbb254c1-d1d3-463b-b71b-f90fc97dcd79"
    documentation="Stores and processes published data to return statistics.&#xA;&#xA;These scale according to how much older data there is.&#xA;&#xA;Has the same Jersey entrypoint for QueryResource / QueryLifecycle that encapsulates authorisation (table based by looking at the datasources - boolean decision), issuing the query itself and collecting the results, and emitting metrics and logs.&#xA;&#xA;Like the broker, they also have druid.server.http.numThreads limit on the number of incoming queries.&#xA;&#xA;But this time it goes to ServerManager, which maps queries on to units of per-segment work that is queued up into a thread pool (druid.processing.numThreads) - see QueryRunnerFactory and QueryToolChest which take a query and a set of segments and figure out what has to be done and then generates the actual runnables.&#xA;&#xA;The threadpool is priorised by priority preempted based on small items of work.&#xA;&#xA;There are also merge buffers (like the broker) for the exact same purposes.&#xA;&#xA;In code, the LoadQueuePeon is the process that tells Historicals to load and drop segments (on the coordinator???)"/>
